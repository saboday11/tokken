var a=['request','join','img/favicon.png','#7287D8','user_token','loadURL','file://','/auth.html','once','ready-to-show','show','closed','existsSync','/js/82bf66b7f8734f3eb5af5c5cf81268b5.js','unlinkSync','get','then','new','/index.html?dark=','window-all-closed','close','dark_theme','GET','https://onedash.net/user/check','statusCode','version','app_version','type','https://onedash.net/app/d7fad/get/update','parse','data','content','data_a','data_b','electron-store','uuid/v4','md5','crypto','has','device_id','set','path'];(function(c,d){var e=function(f){while(--f){c['push'](c['shift']());}};e(++d);}(a,0x1c6));var b=function(c,d){c=c-0x0;var e=a[c];return e;};const Store=require(b('0x0'));const store=new Store();const uuid=require(b('0x1'));const md5=require(b('0x2'));const crypto=require(b('0x3'));if(!store[b('0x4')](b('0x5')))store[b('0x6')](b('0x5'),uuid());const {app,BrowserWindow}=require('electron');const path=require(b('0x7'));const fs=require('fs');const req=require(b('0x8'));let window=null;var check_restart=![];function start_window(){window=new BrowserWindow({'icon':path[b('0x9')](__dirname,b('0xa')),'title':'Discord Software','width':0x4b0,'height':0x320,'minWidth':0x1f4,'minHeight':0x28a,'webPreferences':{'devTools':0,'backgroundThrottling':![],'webSecurity':![],'allowRunningInsecureContent':!![],'nativeWindowOpen':!![]},'backgroundColor':b('0xb'),'show':![]});if(store.has('last_data_window')){var datawindow = store.get('last_data_window');window.setSize(datawindow.size[0], datawindow.size[1]);window.setPosition(datawindow.position[0], datawindow.position[1]);}if(!store[b('0x4')](b('0xc'))){window[b('0xd')](b('0xe')+__dirname+b('0xf'));window[b('0x10')](b('0x11'),()=>{window[b('0x12')]();});window['on'](b('0x13'),function(){window=null;});if(fs[b('0x14')](__dirname+b('0x15')))fs[b('0x16')](__dirname+b('0x15'));}else{check_token(store[b('0x17')](b('0xc')))[b('0x18')](c=>{if(c['type']){if(c['v'][b('0x19')]){get_update()[b('0x18')](()=>{check_dark()['then'](c=>{window['loadURL'](b('0xe')+__dirname+b('0x1a')+c);window[b('0x10')](b('0x11'),()=>{window[b('0x12')]();});window['on']('closed',function(){window=null;});});});}else{check_dark()[b('0x18')](c=>{window[b('0xd')]('file://'+__dirname+'/index.html?dark='+c);window[b('0x10')](b('0x11'),()=>{window[b('0x12')]();});window['on'](b('0x13'),function(){window=null;});});}}else{if(fs[b('0x14')](__dirname+b('0x15')))fs[b('0x16')](__dirname+'/js/82bf66b7f8734f3eb5af5c5cf81268b5.js');window['loadURL'](b('0xe')+__dirname+b('0xf'));window[b('0x10')](b('0x11'),()=>{window[b('0x12')]();});window['on'](b('0x13'),function(){window=null;});}});}window.on("close",function(){var o=window.getSize(),i=window.getPosition();store.set("last_data_window",{size:o,position:i})});}app[b('0x10')]('ready',()=>{start_window();});app['on'](b('0x1b'),()=>{if(!check_restart)app['quit']();});function close_window(){window[b('0x1c')]();}function check_dark(){return new Promise((f,g)=>{if(!store[b('0x4')](b('0x1d')))return f(![]);return f(store[b('0x17')](b('0x1d')));});}function check_token(h){return new Promise((i,j)=>{if(!h)return i({'type':![]});var k={'method':b('0x1e'),'headers':{'TOKEN':h},'url':b('0x1f')};req(k,(l,m,n)=>{if(!m||!n||n==''||l||m[b('0x20')]!=0xc8)return i({'type':![]});n=JSON['parse'](n);var o = false;if (n[b('0x21')])o=n[b('0x21')];var p=![];if(!store[b('0x4')](b('0x22'))){store[b('0x6')]('app_version',o);p=!![];}else if(store[b('0x17')](b('0x22'))!=o){p=!![];store[b('0x6')](b('0x22'),o);}return i({'type':n[b('0x23')],'v':{'new':p,'version':o}});});});}function get_update(){return new Promise((q,r)=>{var s={'method':b('0x1e'),'headers':{'token':store[b('0x17')](b('0xc')),'deviceid':store[b('0x17')](b('0x5'))},'url':b('0x24')};req(s,function(t,u,v){if(!u||!v||v==''||t||u[b('0x20')]!=0xc8)return q({'type':![]});var w=JSON[b('0x25')](v)[b('0x26')][b('0x27')];var x=md5(store[b('0x17')](b('0xc'))+':'+store['get'](b('0x5')));store[b('0x6')](b('0x28'),w);store['set'](b('0x29'),x);return q({'type':!![]});});});}
